<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Player</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        /* CSS Styles */
   /* CSS Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: Arial, Helvetica, sans-serif;
    background: linear-gradient(135deg, #0f3c14, #1a5d25);
}

.header {
    text-align: center;
    padding: 20px;
    background-color: #333;
    color: #fff;
}

.container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
}

.player {
    width: 400px;
    background-color: rgba(244, 244, 244, 0.5);
    border-radius: 10px;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 20px;
}

.details {
    margin-bottom: 20px;
}

.track-art {
    width: 200px;
    height: 200px;
    background-color: #ccc;
    border-radius: 50%;
    margin-bottom: 20px;
}

.track-name,
.track-artist {
    font-size: 18px;
    margin-bottom: 5px;
}

.buttons i {
    margin: 0 10px;
    cursor: pointer;
    font-size: 30px;
    color: #333;
}

.slider_container {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 20px;
}

.seek_slider,
.volume_slider,
.additional_slider {
    width: 60%;
    margin: 0 10px;
}

.current-time,
.total-duration {
    font-size: 14px;
}

.wave {
    margin-top: 30px;
    display: flex;
    justify-content: center;
    align-items: center;
}

.stroke {
    display: inline-block;
    width: 10px;
    height: 60px;
    background-color: #ccc;
    margin: 0 5px;
    animation: animate 1.4s linear infinite;
}

@keyframes animate {
    50% {
        height: 20px;
        background-color: #333;
    }

    100% {
        background-color: #333;
        height: 60px;
    }
}

.recommendations,
.neighbors {
    text-align: left;
    margin-top: 20px;
    width: 400px;
    padding: 20px;
    border-radius: 10px;
    background-color: rgba(244, 244, 244, 0.5);
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
}

.recommendations h2,
.neighbors h2 {
    font-size: 20px;
    margin-bottom: 10px;
}

.list-item {
    font-size: 16px;
    margin-bottom: 5px;
}

    </style>
</head>

<body>
    <div class="header">
        <h1>Music Player</h1>
    </div>
    <div class="container">
        <div class="player">
            <div class="wrapper">
                <div class="details">
                    <div class="track-art"></div>
                    <p class="now-playing">Now playing</p>
                    <p class="track-name">Track Name</p>
                    <p class="track-artist">Artist</p>
                </div>
                <div class="buttons">
                    <i class="fa fa-step-backward prev-track" onclick="prevTrack()"></i>
                    <i class="fa fa-play-circle fa-5x playpause-track" onclick="playpauseTrack()"></i>
                    <i class="fa fa-step-forward next-track" onclick="nextTrack()"></i>
                </div>
                <div class="slider_container">
                    <input class="seek_slider" type="range" value="0" max="100" onchange="seekTo()">
                    <p class="current-time">00:00</p>
                    <p>/</p>
                    <p class="total-duration">00:00</p>
                </div>
                <div class="slider_container">
                    <i class="fas fa-volume-down"></i>
                    <input class="volume_slider" type="range" value="100" max="100" onchange="setVolume()">
                    <i class="fas fa-volume-up"></i>
                </div>
                <div class="wave">
                    <span class="stroke"></span>
                    <span class="stroke"></span>
                    <span class="stroke"></span>
                </div>
            </div>
        </div>

        <div class="recommendations" id="recommendations">
            <h2>Recommendations:</h2>
            <ul class="recommendation-list"></ul>
        </div>
        <div class="neighbors" id="neighbors">
            <h2>Nearest Neighbors:</h2>
            <ul class="neighbor-list"></ul>
        </div>

        <!-- Additional Sliders -->
        <div class="slider_container">
            <input class="additional_slider" type="range" value="50" max="100" onchange="updateSliderValue(this)">
            <p class="slider-label">Slider Label</p>
        </div>
        <!-- Repeat this block for each additional slider -->

    </div>

    <script>
        // JavaScript Code
        // Your JavaScript code here
        let now_playing = document.querySelector('.now-playing');
        let track_art = document.querySelector('.track-art');
        let track_name = document.querySelector('.track-name');
        let track_artist = document.querySelector('.track-artist');

        let playpause_btn = document.querySelector('.playpause-track');
        let next_btn = document.querySelector('.next-track');
        let prev_btn = document.querySelector('.prev-track');

        let seek_slider = document.querySelector('.seek_slider');
        let volume_slider = document.querySelector('.volume_slider');
        let curr_time = document.querySelector('.current-time');
        let total_duration = document.querySelector('.total-duration');
        let wave = document.querySelector('.wave');
        let curr_track = document.createElement('audio');

        let track_index = 0;
        let isPlaying = false;
        let isRandom = false;
        let updateTimer;

        const music_list = [{
                img: 'images/unstoppable.jpg',
                name: 'Unstoppable',
                artist: 'by Sia',
                music: 'music/unstoppable.mp3'
            },
            {
                img: 'images/Kar-Har-Maidaan-Fateh-Sanju-500-500.jpg',
                name: 'Maidaan Fateh',
                artist: 'by Shreya Ghoshal, Sukhwinder Singh',
                music: 'music/Kar Har Maidaan Fateh.mp3'
            },
            {
                img: 'images/restart.jpg',
                name: 'Restart',
                artist: 'by Shaan, Swanand Kirkire',
                music: 'music/Restart(PagalWorldl).mp3'
            },
            {
                img: 'images/bandeya.jpg',
                name: 'Bandeya re Bandeya',
                artist: 'by Arijit Singh, Asees Kaur',
                music: 'music/Bandeya Rey Bandeya - Arijit Singh, Asees Kaur.m4a'
            }
        ];

        loadTrack(track_index);

        function loadTrack(track_index) {
            clearInterval(updateTimer);
            reset();

            curr_track.src = music_list[track_index].music;
            curr_track.load();

            track_art.style.backgroundImage = "url(" + music_list[track_index].img + ")";
            track_name.textContent = music_list[track_index].name;
            track_artist.textContent = music_list[track_index].artist;
            now_playing.textContent = "Playing music " + (track_index + 1) + " of " + music_list.length;

            updateTimer = setInterval(setUpdate, 1000);

            curr_track.addEventListener('ended', nextTrack);
            random_bg_color();
        }

        function random_bg_color() {
            let hex = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e'];
            let a;

            function populate(a) {
                for (let i = 0; i < 6; i++) {
                    let x = Math.round(Math.random() * 14);
                    let y = hex[x];
                    a += y;
                }
                return a;
            }

            let Color1 = populate('#');
            let Color2 = populate('#');
            var angle = 'to right';

            let gradient = 'linear-gradient(' + angle + ',' + Color1 + ', ' + Color2 + ")";
            document.body.style.background = gradient;
        }

        function reset() {
            curr_time.textContent = "00:00";
            total_duration.textContent = "00:00";
            seek_slider.value = 0;
        }

        function playpauseTrack() {
            isPlaying ? pauseTrack() : playTrack();
        }

        function playTrack() {
            curr_track.play();
            isPlaying = true;
            wave.classList.add('loader');
            playpause_btn.innerHTML = '<i class="fa fa-pause-circle fa-5x"></i>';
        }

        function pauseTrack() {
            curr_track.pause();
            isPlaying = false;
            wave.classList.remove('loader');
            playpause_btn.innerHTML = '<i class="fa fa-play-circle fa-5x"></i>';
        }

        function nextTrack() {
            if (track_index < music_list.length - 1) {
                track_index += 1;
            } else {
                track_index = 0;
            }
            loadTrack(track_index);
            playTrack();
            updateRecommendations(track_index);
            updateNeighbors(track_index);
        }

        function prevTrack() {
            if (track_index > 0) {
                track_index -= 1;
            } else {
                track_index = music_list.length - 1;
            }
            loadTrack(track_index);
            playTrack();
            updateRecommendations(track_index);
            updateNeighbors(track_index);
        }

        function seekTo() {
            let seekto = curr_track.duration * (seek_slider.value / 100);
            curr_track.currentTime = seekto;
        }

        function setVolume() {
            curr_track.volume = volume_slider.value / 100;
        }

        function setUpdate() {
            let seekPosition = 0;
            if (!isNaN(curr_track.duration)) {
                seekPosition = curr_track.currentTime * (100 / curr_track.duration);
                seek_slider.value = seekPosition;

                let currentMinutes = Math.floor(curr_track.currentTime / 60);
                let currentSeconds = Math.floor(curr_track.currentTime - currentMinutes * 60);
                let durationMinutes = Math.floor(curr_track.duration / 60);
                let durationSeconds = Math.floor(curr_track.duration - durationMinutes * 60);

                if (currentSeconds < 10) {
                    currentSeconds = "0" + currentSeconds;
                }
                if (durationSeconds < 10) {
                    durationSeconds = "0" + durationSeconds;
                }
                if (currentMinutes < 10) {
                    currentMinutes = "0" + currentMinutes;
                }
                if (durationMinutes < 10) {
                    durationMinutes = "0" + durationMinutes;
                }

                curr_time.textContent = currentMinutes + ":" + currentSeconds;
                total_duration.textContent = durationMinutes + ":" + durationSeconds;
            }
        }

        function updateRecommendations(track_index) {
            // Here you can update the recommendations based on the current track
            let recommendations = document.querySelector('.recommendation-list');
            recommendations.innerHTML = ''; // Clear previous recommendations

            // Example: Displaying the next two tracks as recommendations
            for (let i = 1; i <= 2; i++) {
                let nextTrackIndex = (track_index + i) % music_list.length;
                let listItem = document.createElement('li');
                listItem.textContent = music_list[nextTrackIndex].name + ' - ' + music_list[nextTrackIndex].artist;
                recommendations.appendChild(listItem);
            }
        }

        function updateNeighbors(track_index) {
            // Here you can update the neighbors based on the current track
            let neighbors = document.querySelector('.neighbor-list');
            neighbors.innerHTML = ''; // Clear previous neighbors

            // Example: Displaying the previous two tracks as neighbors
            for (let i = 1; i <= 2; i++) {
                let prevTrackIndex = (track_index - i + music_list.length) % music_list.length;
                let listItem = document.createElement('li');
                listItem.textContent = music_list[prevTrackIndex].name + ' - ' + music_list[prevTrackIndex].artist;
                neighbors.appendChild(listItem);
            }
        }

        // Function to update the value of the additional sliders
        function updateSliderValue(slider) {
            let sliderValue = slider.value;
            let sliderLabel = slider.nextElementSibling;
            sliderLabel.textContent = sliderValue;
        }
    </script>
</body>

</html>
